<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Products â€” Sell-It UG</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header class="header container">
    <div class="logo">Sell-It UG</div>
    <nav><a href="index.html">Home</a> <a href="post-product.html">Post Product</a> <a href="login.html">Login</a></nav>
  </header>

  <main class="container">
    <h1>Products</h1>
    <div id="productsGrid" class="products-grid"></div>
    <p id="productsMsg" class="msg"></p>
  </main>

  <script src="app.js"></script>
  <script>
    // load products on page ready
    window.addEventListener('load', async () => {
      const msgEl = document.getElementById('productsMsg');
      msgEl.textContent = 'Loading products...';
      try {
        const products = await fetchProducts(); // app.js helper
        msgEl.textContent = '';
        const grid = document.getElementById('productsGrid');
        if (!products.length) {
          grid.innerHTML = '<p>No products yet. Be the first to post!</p>';
          return;
        }
        grid.innerHTML = products.map(p => `
          <div class="product-card">
            <img src="${p.imageUrl || 'placeholder.png'}" alt="${escapeHtml(p.title)}" />
            <h3>${escapeHtml(p.title)}</h3>
            <p class="price">UGX ${Number(p.price).toLocaleString()}</p>
            <p>${escapeHtml(p.description)}</p>
            <p class="meta">Seller: ${escapeHtml(p.sellerName || 'Unknown')}</p>
          </div>
        `).join('');
      } catch (err) {
        msgEl.textContent = 'Error loading products: ' + err.message;
      }
    });

    // small helper for escaping
    function escapeHtml(s = '') {
      return s.replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;');
    }
  </script>
</body>
</html>